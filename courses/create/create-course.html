<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon.svg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.svg" />
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.svg" />
    <link href="/dist/output.css" rel="stylesheet">
    <link href="/components/nav/nav.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <link rel="stylesheet" href="/components/markdownEditor/formatting.css"> <!-- For Markdown Editor -->
    
    <title>Create Project Â· CODEProjects</title>
</head>
<body>
    <link rel="stylesheet" href="/components/nav/nav.css">
    <iframe src="/components/nav/nav.html" style="width: 100%;"></iframe>

    <div id="create-project">
        <h2 id="create-project-text">Create a Project</h2>

        <form onsubmit="createProject(event)">
            <p>Project Title<span id="red-asterisk">*</span></p>
            <input type="text" id="project-title" required>

            <p>Project Description<span id="red-asterisk">*</span></p>
            <input type="text" id="project-description" required>

            <p>Project Cover Image<span id="red-asterisk">*</span></p>
            <input type="file" id="project-cover" required>
            <br>

            <p>Skill Type<span id="red-asterisk">*</span></p>
            <select id="skill-type">
                <option value="Beginner">Beginner</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Expert">Expert</option>
                <option value="Any Skill Level">Any Skill Level</option>
            </select>

            <div id="container">
                <script src="/components/FontFlex/FontFlexComponents/scripts/createFormatting.js"></script>
                <link rel="stylesheet" href="/components/FontFlex/FontFlexComponents/styles/formatting.css">
                <script src="/src/projects/create/adaptSizeOfTextarea.js"></script>

                <!-- <button class="FontFlex-formatting-button" onclick="addH1()">Add H1</button>
                <button class="FontFlex-formatting-button" onclick="addH2()">Add H2</button>
                <button class="FontFlex-formatting-button" onclick="addH3()">Add H3</button>
                <button class="FontFlex-formatting-button" onclick="returnToNormalFont()">Return to Normal Font</button> -->

                <br>
            </div>

            <p>Project Content <span id="red-asterisk">*</span></p>
            <textarea id="project-content"></textarea> <!-- THIS IS JUST TO SHOW THE RESULTS, YOU MAY REMOVE THIS IF YOU WANT. This can also be external (like in a different .html file.) -->
            <br>
            <div id="info">
                <img src="/assets/svg/information.svg"><p>When you create a Project that goes to your profile, and is under your name. Make sure that this is a quality Project before creating.</p>
            </div>
            <br>

            <button id="submit" type="submit">
                Create Project
            </button>
        </form>

        <script>
            function createProject(event) {
                event.preventDefault(); // Prevent form submission

                const form = event.target; // Get the form element
                const projectTitle = form.querySelector('#project-title').value;
                const projectDescription = form.querySelector('#project-description').value;
                const imageInput = form.querySelector('#project-cover');
                const file = imageInput.files[0];
                const content = form.querySelector('#project-content').value;
                const skillLevel = document.getElementById('skill-type').value.trim();

                if (projectTitle && projectDescription && file) {
                    const reader = new FileReader();
                    reader.readAsDataURL(file);

                    reader.onload = function (event) {
                        const imageDataUrl = event.target.result;

                        localStorage.setItem('savedImage', imageDataUrl);
                        localStorage.setItem('projectTitle', projectTitle);
                        localStorage.setItem('projectDescription', projectDescription);
                        localStorage.setItem('projectContent', content);
                        localStorage.setItem('skillLevel', skillLevel);

                        // You can choose to redirect to another page or perform other actions here
                        console.log('Project created successfully!');
                        form.reset();
                        window.location.href = 'http://127.0.0.1:5500/src/projects/createdProjectsHomePage/allProjects.html';
                    };
                } else {
                    alert('Please fill in all the required fields.');
                    console.error('Please fill in all the required fields.');
                }
            }
        </script>
    </div>

    <script src="script.js"></script>
    <script src="/components/FontFlex/FontFlexComponents/scripts/createFormatting.js"></script> 
    <script src="/src/projects/create/adaptSizeOfTextarea.js"></script>
    <script src="/components/FontFlex/FontFlexComponents/scripts/createFormatting.js"></script>
</body>
</html>
